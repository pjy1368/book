# 6장. 데이터베이스 객체 작성과 삭제
## 25강. 데이터베이스 객체
### 1. 데이터베이스 객체
- 데이터베이스 객체: 테이블이나 뷰, 인덱스 등 데이터베이스 내에 정의하는 모든 것을 일컫는 말.
- 객체: 데이터베이스 내에 실체를 가지는 어떤 것.
- 지금까지 배운 것 중에서는 테이블이 객체라고 볼 수 있음.
- SQL 명령은 객체가 아님.

### 2. 스키마
- 데이터베이스 객체는 '스키마'라는 그릇 안에 만들어진다.
- MySQL에서는 CREATE DATABASE 명령으로 작성한 데이터베이스가 스키마가 된다.

## 26강. 테이블 작성, 삭제, 변경
### 1. 테이블 작성
- 'CREATE TABLE (열 정의1, 열 정의2, ...)'
- 열 정의
  - 열명 자료형 [DEFAULT 기본값] [NULL | NOT NULL]
  
### 2. 테이블 삭제
- 'DROP TABLE 테이블명'
- DELETE 명령은 행 단위로 여러 가지 내부 처리가 일어나므로 테이블 내의 모든 데이터를 지울 때는 'TRUNCATE TABLE 테이블명' 쿼리문을 사용한다.

### 3. 테이블 변경
- 'ALTER TABLE 테이블명 변경명령'

#### 열 추가
- 'ALTER TABLE 테이블명 ADD 열 정의'
- 기존 데이터행이 존재하면 추가한 열의 값이 모두 NULL이 된다.
- 기본값이 있으면 기본값으로 데이터가 저장된다.
- NOT NULL 제약을 붙인 열을 추가하고 싶다면 먼저 NOT NULL로 제약을 건 뒤에 NULL 이외의 값으로 기본값을 지정해야 한다.

#### 열 속성 변경
- 'ALTER TABLE 테이블명 MODIFY 열 정의'
- 열 이름은 변경할 수 없지만, 자료형이나 기본값, NOT NULL 제약 등의 속성을 변경할 수 있다.

#### 열 이름 변경
- 'ALTER TABLE 테이블명 CHANGE [기존 열 이름] [신규 열 정의]'
- CHANGE를 통해 열 이름 외에 속성도 변경할 수 있다.

#### 열 삭제
- 'ALTER TABLE 테이블명 DROP 열명'

### 4. ALTER TABLE로 테이블 관리
- 최대길이 연장, 열 추가

## 27강. 제약
### 1. 테이블 작성시 제약 정의
- 열 제약, 테이블 제약
- CONSTRAINT 키워드를 사용해서 제약 이름을 지정할 수 있다.

### 2. 제약 추가
- 열 제약은 'ALTER TABLE MODIFY 열 정의'를 통해 제약을 변경할 수 있다.
- 테이블 제약은 'ALTER TABLE'의 ADD 하부 명령으로 추가할 수 있다.

### 3. 제약 삭제
- 열 제약은 'ALTER TABLE MODIFY 열 정의'를 통해 삭제할 수 있다.
- 테이블 제약은 'ALTER TABLE'의 DROP 하부 명령으로 삭제할 수 있다.

### 4. 기본키
- 기본키로 지정할 열은 NOT NULL 제약이 설정되어 있어야 한다.
- 기본키 제약이 설정된 열에는 중복된 값을 저장할 수 없다.
- 복수의 열이 기본키를 가질 수도 있다. 이때는 두 개의 기본키가 동시에 중복될 때만 오류를 반환한다.

## 28강. 인덱스 구조
### 1. 인덱스
- 인덱스는 테이블에 붙여진 색인이다.
- 인덱스의 역할은 검색 속도를 향상시키는 것이다.
- 테이블을 삭제하면 인덱스도 같이 삭제된다.

### 2. 검색에 사용하는 알고리즘

#### 풀 테이블 스캔
- 테이블에 저장된 모든 값을 처음부터 조사해 나감.

#### 이진 탐색
- 집합을 반으로 나눠서 조사해 나감.

#### 이진 트리

### 3. 유일성
- 이진 트리에는 중복하는 값을 등록할 수 없다. 그래서 기본키 제약을 적용하여 이진 트리로 인덱스를 작성하는 데이터베이스가 많다.

## 29강. 인덱스 작성과 삭제
### 1. 인덱스 작성
- 'CREATE INDEX 인덱스명 ON 테이블명 (열명1, 열명2, ...)'

### 2. 인덱스 삭제
- 'DROP INDEX 인덱스명' (스키마 객체)
- 'DROP INDEX 인덱스명 ON 테이블명' (테이블 내 객체)

### 3. EXPLAIN
- 실제로 인덱스를 사용해 검색하는지 확인하는 명령.
- 'EXPLAIN SQL 명령'
- 인덱스를 사용한다면 possible_key와 key가 해당 인덱스명이 되고, 그렇지 않다면 NULL이 됨.

### 4. 최적화
- 서로 다른 값으로 여러 종류의 데이터가 존재할수록 인덱스 효율이 좋아짐.

## 30강. 뷰 작성과 삭제
### 1. 뷰
- 뷰는 SELECT 명령을 기록하는 데이터베이스 객체다.
- FROM 구에서 서브쿼리를 사용할 수 있었는데, 이 서브쿼리 부분을 뷰 객체로 만들면 복잡한 SELECT 명령을 간단하게 만들 수 있다.
- 뷰는 데이터를 쓰거나 지울 수 없는 저장공간이 없어서 '가상 테이블'이라고도 불린다.

### 2. 뷰 작성과 삭제
- 뷰의 작성: 'CREATE VIEW 뷰명 [(열명1, 열명2, ...)] AS SELECT 명령'
- 뷰의 삭제: 'DROP VIEW 뷰명'

### 3. 뷰의 약점
- 뷰는 저장공간을 소비하지 않는 대신 CPU 자원을 사용한다.

#### 머티리얼라이즈드 뷰 (Materialized View)
- 일반적인 뷰는 데이터를 일시적으로 저장했다가 쿼리가 실행 종료될 때 함께 삭제된다.
- 머티리얼라이즈드 뷰는 처음 참조되었을 때 데이터를 저장해 준다.
- 다만, MySQL에서는 사용할 수 없다.

#### 함수 테이블
- 뷰를 구성하는 SELECT 명령은 단독으로 실행할 수 있어야 한다.
- 상관 서브쿼리는 뷰의 SELECT 명령으로 사용할 수 없다.
- 함수 테이블은 테이블을 결괏값으로 반환해주는 사용자정의 함수이다.
- 인수의 값에 따라 WHERE 조건을 붙여 결괏값을 바꿈으로써 상관 서브쿼리처럼 동작하게 할 수 있다.
