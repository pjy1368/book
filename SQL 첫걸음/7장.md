# 7장. 복수의 테이블 다루기
## 31강. 집합 연산
### 1. SQL과 집합
- SELECT문 실행 이후 반환된 결과 전체를 하나의 집합이라고 할 수 있다.

### 2. UNION으로 합집합 구하기
#### UNION
```mysql
SELECT * FROM sample71_a
UNION
SELECT * FROM sample72_b;
```
- 위와 같이 두 개의 명령을 하나의 명령으로 합칠 수 있다. 이때, 연산은 합집합이다.
- 그리고 각각의 SELECT 명령의 열의 내용은 서로 일치해야 한다.

#### UNION을 사용할 때의 ORDER BY
- UNION으로 SELECT 명령을 결합해 합집합을 구하는 경우, 마지막 SELECT 명령에만 ORDER BY를 지정할 수 있다.
- 또한, ORDER BY 구에 지정하는 열은 별명을 붙여 이름을 일치시켜야 한다.
```mysql
SELECT a AS c FROM sample71_a
UNION
SELECT b AS c FROM sample71_b ORDER BY c;
```

#### UNION ALL
- 중복을 제거하지 않고 합집합을 하고 싶다면, UNION ALL을 사용한다.

### 3. 교집합과 차집합
- MySQL에서는 지원되지 않는다.

## 32강. 테이블 결합
### 1. 곱집합과 교차결합
- 곱집합
- {A, B} X {1, 2} = {(A, 1), (A, 2), (B, 1), (B 2)}

#### 교차 결합
- 'SELECT * FROM 테이블명1, 테이블명2'

#### UNION 연결과 결합 연결의 차이
- UNION으로 합집합을 구할 때는 세로 방향으로 더해지지만, FROM 구로 테이블을 결합할 때는 가로 방향으로 더해진다.

### 2. 내부 결합
- 교차 결합으로 계산된 곱집합에서 원하는 조합으로 검색하는 것을 내부 결합이라 부른다.
- 'SELECT * FROM 상품, 재고수 WHERE 상품.상품코드 = 재고수.상품코드'

### 3. INNER JOIN으로 내부 결합하기
- 'SELECT * FROM 테이블명1 INNER JOIN 테이블명2 ON 결합조건'

### 4. 내부 결합을 활용한 데이터 관리
```mysql
SELECT S.상품명, M.메이커명
  FROM 상품2 S INNER JOIN 메이커 M
    ON S.메이커코드 = M.메이커코드;
```

#### 외부키
- 다른 테이블의 기본키를 참조하는 열이 외부키가 된다.
- 메이커 테이블의 메이커코드는 기본키인데, 상품 테이블의 메이커코드는 외부키가 된다. (상품 테이블의 기본키는 상품코드이다.)

#### 자기 결합
- 자기 자신의 기본키를 참조하는 열을 자기 자신이 가지는 데이터 구조일 때 사용.

### 5. 외부 결합
- LEFT JOIN, RIGHT JOIN을 사용한다.
- 결합하는 기준을 정해줄 수 있다.

## 33강. 관계형 모델
### 1. 관계형 모델
- 관계형 모델의 릴레이션은 SQL에서 말하는 테이블에 해당한다.
- 속성은 열, 튜플을 행에 해당한다.
- 관계 대수
  - 하나 이상의 관계를 바탕으로 연산한다.
  - 연산한 결과, 반환되는 것 또한 관계이다.
  - 연산을 중첩 구조로 실행해도 상관없다.

### 2. 관계형 모델과 SQL
- 합집합: 릴레이션끼리의 덧셈. SQL에서는 UNION.
- 차집합: 릴레이션끼리의 뺄셈. SQL에서는 EXCEPT.
- 교집합: 릴레이션끼리의 교집합. SQL에서는 INTERSECT.
- 곱집합: 릴레이션끼리의 대진표를 조합. SQL에서는 FROM 구에 복수의 테이블 지정. 또는 CROSS JOIN. ('SELECT * FROM A CROSS JOIN B')
- 선택: 튜플의 추출. SQL에서는 WHERE 구에 조건을 지정해 데이터를 검색하는 것.
- 투영: 속성의 추출. SQL에서는 SELECT 구에 결과로 반환할 열을 지정.
- 결합: 릴레이션끼리 교차결합해 계산된 곱집합에서 결합조건을 만족하는 튜플을 추출하는 것. SQL에서는 내부결합.
