# 제2장. 간단한 프로토콜 HTTP
## 2.1 HTTP는 클라이언트와 서버 간에 통신을 한다
## 2.2 리퀘스트와 리스폰스를 교환하여 성립
### 리퀘스트 예시
```
POST /from/entry HTTP/1.1
Host: hackr.jp
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded
Content-Length: 16
name = ueno&age=37
```
- 첫 번째 줄은 시작 줄이며 메소드, 리퀘스트 URI, HTTP 버전 번호로 나뉜다.
- "POST"와 같은 메소드는 서버에 요구하는 종류를 나타낸다.
- "/from/entry"는 요구 대상인 리소스를 나타내고 있다.
- "HTTP/1.1"은 HTTP 버전 번호이다.
- 두 번째 줄부터 마지막 줄 바로 전까지는 리퀘스트 헤더 필드이다.
- 마지막 줄은 엔티티이다.

### 리스폰스 예시
```
HTTP /1.1 200 OK
Date: Tue, 10 Jul 2012 06:50:15 GMT
Content-Length: 362
Content-Type: text/html

<html>
...
```
- 첫 번째 줄은 시작 줄이며 HTTP 버전 번호, 상태 코드와 설명으로 나뉜다.
- "HTTP /1.1"은 HTTP 버전 번호이다.
- "200 OK"는 리퀘스트의 처리 결과를 나타내는 상태 코드와 설명이다.
- 다음 줄부터 <html> 전까지는 헤더 필드라고 불린다.
- <html> 부터는 바디라고 불리는 리소스 본체가 된다.

## 2.3 HTTP는 상태를 유지하지 않는 프로토콜
- HTTP는 상태를 계속 유지하지 않는 stateless 프로토콜이다.
- 결국, HTTP 프로토콜 레벨에서는 이전에 보냈던 리퀘스트나 이미 되돌려준 리스폰스에 대해서는 전혀 기억하지 못한다.
- 상태를 계속 유지하고 싶은 요구에 부응하기 위해서 쿠키라는 기술이 도입되었다.

## 2.4 리퀘스트 URI로 리소스를 식별
- HTTP는 URI를 사용하여 인터넷 상의 리소스를 지정한다.
- 리퀘스트 URI를 지정하는 방법
  - 모든 URI를 리퀘스트 URI에 포함한다.
  - Host 헤더 필드에 네트워크 로케이션을 포함한다.

## 2.5 서버에 임무를 부여하는 HTTP 메소드
### GET: 리소스 획득
- GET 메소드는 리퀘스트 URI로 식별된 리소스를 가져올 수 있도록 요구한다.
- 가져올 리소스 내용은 지정된 리소스를 서버가 해석한 결과이다.

### POST: 엔티티 전송
- POST 메소드는 엔티티를 전송하기 위해서 사용된다.

### PUT: 파일 전송
- PUT 메소드는 파일을 전송하기 위해서 사용된다.
- 인증 기능이 없어 누구든지 파일을 업로드 가능하다는 보안 상의 문제가 있어서 잘 사용하지는 않는다.

### HEAD: 메시지 헤더 취득
- HEAD 메소드는 GET 메소드와 같은 기능이지만 메시지 바디는 돌려주지 않는다.
- URI 유효성과 리소스 갱신 시간을 확인하는 목적으로 사용된다.

### DELETE: 파일 삭제
- DELETE 메소드는 파일을 삭제하기 위해 사용된다.
- PUT 메소드와 마찬가지로 인증 기능이 없다.

### OPTIONS: 제공하고 있는 메소드의 문의
- OPTIONS 메소드는 리퀘스트 URI로 지정한 리소스가 제공하고 있는 메소드를 조사하기 위해 사용된다.

### TRACE: 경로 조사
- TRACE 메소드는 Web 서버에 접속해서 자신에게 통신을 되돌려 받는 루프백을 발생시킨다.
- 리퀘스트를 보낸 곳에 어떤 리퀘스트가 가공되어 있는지 등을 조사할 수 있다.
- XST와 같은 보안 상의 문제가 있어서 거의 사용하지 않는다.

### CONNECT: 프록시에 터널링 요구
- CONNECT 메소드는 프록시에 터널 접속 확립을 요함으로써, TCP 통신을 터널링 시키기 위해서 사용된다.
- 주로 SSL이랑 TLS 등의 프로토콜로 암호화된 것을 터널링 시키기 위해서 사용되고 있다.

## 2.6 메소드를 사용해서 지시를 내리다

## 2.7 지속 연결로 접속량을 절약
- HTTP 초기 버전에서는 HTTP 통신을 한 번 할 때마다 TCP에 의해 연결과 종료를 하였다.

### 2.7.1 지속 연결
- 지속 연결: 어느 한 쪽이 명시적으로 연결을 종료하지 않는 이상 TCP 연결을 계속 유지하는 방법이다.

### 2.7.2 파이프라인화
- 지속 연결은 여러 리퀘스트를 보낼 수 있도록 파이프라인화를 가능하게 한다.
- 여러 리퀘스트를 병행해서 보내는 것이 가능하므로 일일이 리스폰스를 기다릴 필요가 있다.

## 2.8 쿠키를 사용한 상태 관리
- 쿠키는 리퀘스트와 리스폰스에 쿠키 정보를 추가해서 클라이언트의 상태를 파악하기 위한 시스템이다.
- 쿠키는 서버에서 리스폰스로 보내진 Set-Cookie라는 헤더 필드에 의해 쿠키를 클라이언트에 보존하게 된다.
- 다음 번에 클라이언트가 같은 서버로 리퀘스트를 보낼 때, 자동으로 쿠키 값을 넣어서 송신한다.
